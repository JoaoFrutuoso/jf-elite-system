<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MacroPeso ‚Ä¢ Calculadora</title>

  <!-- √çCONES -->
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="icone-192.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="icone-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icone-512.png" />

  <meta name="theme-color" content="#0b2a1f" />

  <style>
    :root{
      --bg:#070b0a;
      --card:rgba(255,255,255,.06);
      --border:rgba(255,255,255,.12);
      --text:#e9f3ef;
      --muted:rgba(233,243,239,.65);
      --green:#19e27a;
      --green2:#12b861;
      --shadow: 0 12px 60px rgba(25,226,122,.18);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      padding:18px;
      background:radial-gradient(900px 500px at 50% 40%, rgba(25,226,122,.20), transparent 60%),
                 radial-gradient(700px 400px at 30% 20%, rgba(25,226,122,.10), transparent 65%),
                 var(--bg);
      color:var(--text);
      font-family: Arial, Helvetica, sans-serif;
    }
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin:6px auto 14px;
      width:min(980px, 100%);
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .brand h1{
      margin:0;
      font-size:26px;
      letter-spacing:-.5px;
    }
    .brand small{color:var(--muted)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .ghost{
      padding:10px 14px;
      border-radius:12px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      color:var(--text);
      cursor:pointer;
      font-weight:800;
    }

    .wrap{
      width:min(980px, 100%);
      margin:0 auto;
      padding:18px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    .ok{color:#7CFFB0}
    .bad{color:#ff7b7b}
    .note{color:var(--muted); margin-top:8px; font-size:13px}

    /* √°rea da calculadora */
    .calc{
      margin-top:14px;
      padding:16px;
      border-radius:16px;
      background: rgba(0,0,0,.25);
      border:1px solid var(--border);
      min-height:260px;
    }
    .calc h2{margin:0 0 8px}
    .placeholder{
      color:var(--muted);
      line-height:1.5;
      font-size:14px;
    }
    code{color:#7CFFB0}
  </style>
</head>

<body>
  <div class="top">
    <div class="brand">
      <h1>MacroPeso ‚Ä¢ Calculadora</h1>
      <small id="userLine">Carregando‚Ä¶</small>
    </div>

    <div class="actions">
      <button class="ghost" id="btnHome">Voltar</button>
      <button class="ghost" id="btnClear">Limpar acesso</button>
      <button class="ghost" id="btnLogout">Sair</button>
    </div>
  </div>

  <div class="wrap">
    <div id="status" class="ok">‚úÖ Acesso liberado ‚Äî p√°gina carregada com sucesso.</div>
    <div class="note">
      Se isso abriu, o login + redirecionamento est√° 100% funcionando. Agora √© s√≥ colocar a calculadora real aqui dentro.
    </div>

    <div class="calc" id="calcRoot">
      <h2>√Årea da Calculadora</h2>

      <!-- =========================
           COLE A SUA CALCULADORA AQUI
           (HTML + JS dela)
           ========================= -->

      <div class="placeholder">
        üìå Cole aqui o c√≥digo da calculadora (o seu HTML/JS).
        <br><br>
        Se voc√™ j√° tem a calculadora pronta em outro arquivo, o jeito certo √©:
        <br>
        - colocar o conte√∫do dela dentro desta DIV
        <br>
        - ou me mandar o arquivo/c√≥digo que eu encaixo exatamente no lugar.
        <br><br>
        Enquanto isso, o sistema est√° funcionando (login ‚Üí acesso ‚Üí app).
      </div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = "mp_access_email";
    const STORAGE_TIME = "mp_access_time";

    function normalizeEmail(v){
      return String(v || "").trim().toLowerCase();
    }

    function requireAccess(){
      const email = normalizeEmail(localStorage.getItem(STORAGE_KEY));
      if (!email){
        // se n√£o tem acesso salvo, volta pro login
        window.location.replace("index.html");
        return null;
      }
      return email;
    }

    // Bloqueio
    const email = requireAccess();
    if (email){
      document.getElementById("userLine").textContent = "Logado como: " + email;
    }

    // Bot√µes
    document.getElementById("btnHome").addEventListener("click", () => {
      window.location.href = "index.html";
    });

    document.getElementById("btnClear").addEventListener("click", () => {
      localStorage.removeItem(STORAGE_KEY);
      localStorage.removeItem(STORAGE_TIME);
      window.location.replace("index.html");
    });

    document.getElementById("btnLogout").addEventListener("click", () => {
      localStorage.removeItem(STORAGE_KEY);
      localStorage.removeItem(STORAGE_TIME);
      window.location.replace("index.html");
    });

    // =========================
    // Manifest (sem arquivo extra)
    // melhora ‚ÄúSalvar na tela inicial‚Äù
    // =========================
    (function injectManifest(){
      const manifest = {
        name: "MacroPeso Inteligente",
        short_name: "MacroPeso",
        start_url: "./index.html",
        display: "standalone",
        background_color: "#070b0a",
        theme_color: "#0b2a1f",
        icons: [
          { src: "icone-192.png", sizes: "192x192", type: "image/png" },
          { src: "icone-512.png", sizes: "512x512", type: "image/png" }
        ]
      };
      const blob = new Blob([JSON.stringify(manifest)], { type: "application/manifest+json" });
      const url = URL.createObjectURL(blob);

      const link = document.createElement("link");
      link.rel = "manifest";
      link.href = url;
      document.head.appendChild(link);
    })();
  </script>
</body>
</html>
