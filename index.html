<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MacroPeso Inteligente</title>

  <!-- √çCONES -->
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">

  <style>
    :root{
      --bg:#0b0b0f;
      --card:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.16);
      --text:#ffffff;
      --muted:rgba(255,255,255,.7);
      --green:#00c853;
      --green2:#00a845;
      --red:#ff5252;
      --shadow: 0 20px 60px rgba(0,0,0,.6);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(800px 600px at 50% 30%, rgba(0,200,83,.18), transparent 60%),
                  radial-gradient(700px 500px at 20% 80%, rgba(0,200,83,.10), transparent 65%),
                  var(--bg);
      color:var(--text);
      font-family: Arial, Helvetica, sans-serif;
      padding:24px;
    }
    .card{
      width:min(560px, 92vw);
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:24px;
      backdrop-filter: blur(14px);
    }
    h1{
      margin:0 0 6px 0;
      font-size:34px;
      letter-spacing:.2px;
    }
    .sub{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:16px;
    }
    .input{
      width:100%;
      height:54px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      color:#fff;
      padding:0 16px;
      outline:none;
      font-size:16px;
    }
    .btn{
      width:100%;
      height:56px;
      border:none;
      border-radius:14px;
      background: linear-gradient(180deg, var(--green), var(--green2));
      color:#083b1a;
      font-weight:800;
      font-size:18px;
      cursor:pointer;
      margin-top:12px;
      box-shadow: 0 14px 35px rgba(0,200,83,.25);
    }
    .btn:active{transform: translateY(1px)}
    .msg{
      margin-top:10px;
      font-size:14px;
      color:var(--muted);
      min-height:18px;
    }
    .msg.ok{color: #7CFFB2}
    .msg.err{color: #ff8a80}
    .mini{
      margin-top:14px;
      font-size:12px;
      color:rgba(255,255,255,.55);
      line-height:1.35;
    }
    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    .ghost{
      flex:1;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.85);
      cursor:pointer;
      font-weight:700;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>MacroPeso Inteligente</h1>
    <p class="sub">Calculadora nutricional baseada na TACO</p>

    <input id="email" class="input" type="email" placeholder="Digite seu e-mail" autocomplete="email" />
    <button id="btn" class="btn">Entrar</button>

    <div id="msg" class="msg"></div>

    <div class="row">
      <button class="ghost" id="limpar">Limpar acesso</button>
      <button class="ghost" id="ir">Ir direto (se j√° liberou)</button>
    </div>

    <div class="mini">
      üîí Acesso por e-mail. Se voc√™ j√° liberou antes neste dispositivo, d√° pra entrar direto.<br>
      (Se quiser, depois a gente troca isso por valida√ß√£o via API/Cloudflare pra ficar ‚Äúanti-c√≥pia‚Äù.)
    </div>
  </div>

<script>
  // ‚úÖ COLOQUE AQUI OS E-MAILS LIBERADOS (min√∫sculo)
  // Exemplo:
  // const EMAILS_LIBERADOS = ["cliente@gmail.com", "outro@dominio.com"];
  const EMAILS_LIBERADOS = [
    // "jlucasandradeee@gmail.com"
  ];

  const STORAGE_KEY = "macropeso_access_ok";
  const EMAIL_KEY = "macropeso_email";

  const elEmail = document.getElementById("email");
  const elMsg = document.getElementById("msg");

  function setMsg(text, type){
    elMsg.textContent = text || "";
    elMsg.className = "msg" + (type ? (" " + type) : "");
  }

  function normalizaEmail(v){
    return (v || "").trim().toLowerCase();
  }

  function temAcesso(){
    return localStorage.getItem(STORAGE_KEY) === "1";
  }

  function abrirApp(){
    // abre a calculadora
    window.location.href = "app.html";
  }

  document.getElementById("btn").addEventListener("click", () => {
    const email = normalizaEmail(elEmail.value);

    if(!email || !email.includes("@") || !email.includes(".")){
      setMsg("Digite um e-mail v√°lido.", "err");
      return;
    }

    // Se voc√™ N√ÉO quiser whitelist, comente o bloco abaixo
    if(EMAILS_LIBERADOS.length > 0 && !EMAILS_LIBERADOS.includes(email)){
      setMsg("E-mail n√£o encontrado na lista de acesso.", "err");
      return;
    }

    // libera
    localStorage.setItem(STORAGE_KEY, "1");
    localStorage.setItem(EMAIL_KEY, email);

    setMsg("Acesso liberado. Entrando...", "ok");
    setTimeout(abrirApp, 450);
  });

  document.getElementById("limpar").addEventListener("click", () => {
    localStorage.removeItem(STORAGE_KEY);
    localStorage.removeItem(EMAIL_KEY);
    setMsg("Acesso limpo neste dispositivo.", "");
  });

  document.getElementById("ir").addEventListener("click", () => {
    if(temAcesso()){
      abrirApp();
    } else {
      setMsg("Ainda n√£o tem acesso liberado neste dispositivo.", "err");
    }
  });

  // Se j√° liberou antes, d√° feedback
  if(temAcesso()){
    const e = localStorage.getItem(EMAIL_KEY) || "";
    setMsg("Acesso j√° liberado" + (e ? (" para: " + e) : "") + ". Clique em 'Ir direto'.", "ok");
  }
</script>
</body>
</html>
